<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Feliz 21 de septiembre mi chiquita üíô</title>
  <style>
    :root{
      --bg1:#fff8e6; /* crema c√°lido */
      --bg2:#ffeaa7; /* amarillo suave */
      --accent:#ffcc00; /* amarillo brillante */
      --accent-dark:#d4a100; /* centro */
      --stem:#3a7d44; /* tallo verde */
      --petal:#ffd428; /* p√©talo */
      --petal-2:#ffe36a; /* borde p√©talo */
      --shadow: 0 10px 30px rgba(0,0,0,.15);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", "Noto Sans", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color:#332a00;
      background: radial-gradient(1200px 600px at 80% 0%, var(--bg2), transparent),
                  radial-gradient(1400px 800px at 0% 20%, #fff4cf, transparent),
                  linear-gradient(180deg, #fffef8, var(--bg1));
      overflow:hidden;
    }

    header{
      position:fixed; inset: 20px 20px auto 20px; z-index:10; text-align:center; left:50%; transform:translateX(-50%);
      backdrop-filter: blur(6px);
      background: color-mix(in oklab, white 65%, transparent);
      border:1px solid #ffffffaa;
      border-radius: 18px;
      padding: 10px 18px;
      box-shadow: var(--shadow);
    }
    h1{
      font-size: clamp(22px, 4vw, 48px);
      line-height:1.1; margin:0; letter-spacing: .5px;
      color:#7a5b00;
      text-shadow: 0 1px 0 #fff8, 0 2px 12px #ffd84d88;
    }
    .subtitle{font-size: clamp(12px, 2vw, 16px); opacity:.8}

    .ui{
      position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
      display:flex; gap:10px; z-index: 10;
      flex-wrap:wrap; justify-content:center;
    }
    button{
      appearance:none; border:none; cursor:pointer;
      padding:10px 14px; border-radius:14px; font-weight:700;
      background:radial-gradient(120% 120% at 20% 0%, #fff8b0, #ffd54f);
      box-shadow: inset 0 1px 0 #fff8, 0 10px 20px #ffcf2b55, 0 2px 0 #e6b400 inset;
      color:#5c4a00; transition: transform .1s ease, box-shadow .2s ease; border:1px solid #ffe8a8;
    }
    button:hover{transform:translateY(-1px)}
    button:active{transform:translateY(1px); box-shadow: inset 0 2px 0 #e6b400}

    #garden{position:fixed; inset:0; overflow:hidden;}

    .flower{
      position:absolute; transform-origin:center; user-select:none; pointer-events:auto;
      animation: float 10s ease-in-out infinite;
      filter: drop-shadow(0 8px 12px rgba(0,0,0,.14));
    }
    @keyframes float{
      0%,100%{ transform: translateY(0) rotate(0deg)}
      50%{ transform: translateY(-10px) rotate(0.6deg)}
    }
    .flower svg{display:block}
    .flower:hover{ animation-play-state:paused }
    .flower.bloom{animation: none}

    .petal{ fill: url(#petalGrad); stroke: #f7c400; stroke-width:.8; transform-box: fill-box; transform-origin:50% 90%; }
    .petal.swing{ animation: swing 2.2s ease-in-out infinite; }
    @keyframes swing{
      0%,100%{ transform: rotate(-2deg) }
      50%{ transform: rotate(2deg) }
    }

    .center{ fill: url(#centerGrad); stroke:#b08700; stroke-width:1; }
    .dot{ fill: #7d5a00; opacity:.15 }

    .stem{ stroke: var(--stem); stroke-width:2.5; stroke-linecap:round }
    .leaf{ fill: #4a9b57; filter: saturate(1.2) }

    .pop{
      animation: pop .45s cubic-bezier(.2, .7, .25, 1.4) both;
    }
    @keyframes pop{
      0%{ transform: scale(.2) rotate(-12deg) }
      100%{ transform: scale(1) rotate(0) }
    }

    /* P√©talos flotando (confetti floral) */
    .petal-bit{ position:absolute; width:10px; height:10px; border-radius: 60% 40% 60% 40%;
      background: radial-gradient(circle at 30% 30%, var(--petal-2), var(--petal));
      pointer-events:none; opacity:.95;
      box-shadow: 0 2px 6px rgba(0,0,0,.12);
      animation: fall var(--t,6s) linear forwards; filter: saturate(1.1);
    }
    @keyframes fall{
      to{ transform: translate3d(var(--dx, 100px), 120vh, 0) rotate(540deg); opacity:0 }
    }

    .tooltip{
      position:fixed; top:70px; left:50%; transform:translateX(-50%);
      background:#ffffffd9; color:#5b4700; padding:6px 10px; border-radius:10px; font-size:12px; border:1px solid #fff5b5; box-shadow: var(--shadow);
    }

    @media (prefers-reduced-motion: reduce){
      .flower, .petal.swing, .pop, .petal-bit{ animation:none !important }
    }
  </style>
</head>
<body>
  <header>
    <h1>Feliz 21 de septiembre mi chiquita üíô</h1>
    <div class="subtitle">Toca o haz clic en el jard√≠n para crear flores amarillas que florecen. Arr√°stralas suavemente ‚ú®</div>
  </header>

  <div id="garden" aria-label="Jard√≠n interactivo con flores amarillas" role="application"></div>

  <div class="ui">
    <button id="btn-ramo" title="Crear un ramo">üåº Ramo</button>
    <button id="btn-lluvia" title="Lluvia de p√©talos">üåßÔ∏è Lluvia de p√©talos</button>
    <button id="btn-limpiar" title="Limpiar jard√≠n">üßπ Limpiar</button>
  </div>

  <div class="tooltip" id="tip">Sugerencia: tambi√©n puedes arrastrar una flor para moverla.</div>

  <svg width="0" height="0" style="position:absolute">
    <defs>
      <linearGradient id="stemGrad" x1="0" y1="0" x2="0" y2="1">
        <stop offset="0%" stop-color="#6fbf73"/>
        <stop offset="100%" stop-color="#3a7d44"/>
      </linearGradient>
      <radialGradient id="petalGrad" cx="30%" cy="30%" r="1">
        <stop offset="0%" stop-color="var(--petal-2)"/>
        <stop offset="100%" stop-color="var(--petal)"/>
      </radialGradient>
      <radialGradient id="centerGrad" cx="40%" cy="40%" r="1">
        <stop offset="0%" stop-color="#ffe78a"/>
        <stop offset="100%" stop-color="var(--accent-dark)"/>
      </radialGradient>
    </defs>
  </svg>

  <script>
    const garden = document.getElementById('garden');
    const tip = document.getElementById('tip');
    let tipTimeout;

    function rand(min, max){ return Math.random()*(max-min)+min }
    function el(tag, attrs={}, children=[]) {
      const e = document.createElement(tag);
      for(const [k,v] of Object.entries(attrs)){
        if(k === 'style') Object.assign(e.style, v);
        else if(k.startsWith('on') && typeof v === 'function') e.addEventListener(k.slice(2), v);
        else e.setAttribute(k, v);
      }
      for(const c of children){ e.appendChild(c) }
      return e;
    }

    function makeFlower(size=rand(60, 110)){
      const svgNS = 'http://www.w3.org/2000/svg';
      const svg = document.createElementNS(svgNS, 'svg');
      svg.setAttribute('width', size);
      svg.setAttribute('height', size);
      svg.setAttribute('viewBox', '0 0 100 140'); // extra space for tallo

      // Grupo ra√≠z
      const g = document.createElementNS(svgNS, 'g');
      g.setAttribute('transform', 'translate(50,60)');

      // tallo
      const stem = document.createElementNS(svgNS, 'path');
      const bend = rand(0, 8);
      stem.setAttribute('d', `M0,20 C ${bend},50 ${-bend},80 0,110`);
      stem.setAttribute('class','stem');
      stem.setAttribute('stroke','url(#stemGrad)');
      stem.setAttribute('fill','none');

      // hojas
      const leafL = document.createElementNS(svgNS, 'ellipse');
      leafL.setAttribute('cx', -6); leafL.setAttribute('cy', 70); leafL.setAttribute('rx', 12); leafL.setAttribute('ry', 6);
      leafL.setAttribute('class','leaf');
      leafL.setAttribute('transform', 'rotate(-20)');

      const leafR = document.createElementNS(svgNS, 'ellipse');
      leafR.setAttribute('cx', 8); leafR.setAttribute('cy', 90); leafR.setAttribute('rx', 10); leafR.setAttribute('ry', 5);
      leafR.setAttribute('class','leaf');
      leafR.setAttribute('transform', 'rotate(12)');

      // p√©talos
      const petals = document.createDocumentFragment();
      const count = 10;
      for(let i=0;i<count;i++){
        const p = document.createElementNS(svgNS, 'ellipse');
        p.setAttribute('cx', 0); p.setAttribute('cy', -10);
        p.setAttribute('rx', 14); p.setAttribute('ry', 26);
        p.setAttribute('class','petal swing');
        const angle = (360/count)*i + rand(-4,4);
        p.setAttribute('transform', `rotate(${angle}) translate(0, -10)`);
        petals.appendChild(p);
      }

      // centro
      const center = document.createElementNS(svgNS, 'circle');
      center.setAttribute('r', 12);
      center.setAttribute('cx', 0);
      center.setAttribute('cy', -10);
      center.setAttribute('class','center');

      // puntitos del centro
      for(let i=0;i<14;i++){
        const d = document.createElementNS(svgNS, 'circle');
        const r = rand(2,5);
        const a = rand(0, Math.PI*2);
        const rr = rand(3,9);
        d.setAttribute('r', .9);
        d.setAttribute('cx', 0 + Math.cos(a)*rr);
        d.setAttribute('cy', -10 + Math.sin(a)*rr);
        d.setAttribute('class','dot');
        g.appendChild(d);
      }

      g.appendChild(stem);
      g.appendChild(leafL);
      g.appendChild(leafR);
      g.appendChild(petals);
      g.appendChild(center);

      svg.appendChild(g);

      const wrapper = el('div', { class:'flower pop', style:{ left:'0px', top:'0px' } });
      wrapper.appendChild(svg);

      // arrastrable
      let dragging = false, offX=0, offY=0;
      wrapper.addEventListener('pointerdown', (e)=>{
        dragging = true; wrapper.setPointerCapture(e.pointerId);
        offX = e.clientX - wrapper.offsetLeft;
        offY = e.clientY - wrapper.offsetTop;
      });
      window.addEventListener('pointermove', (e)=>{
        if(!dragging) return;
        wrapper.style.left = (e.clientX - offX) + 'px';
        wrapper.style.top  = (e.clientY - offY) + 'px';
      });
      window.addEventListener('pointerup', ()=> dragging=false);

      // clic = peque√±a lluvia de p√©talos desde la flor
      wrapper.addEventListener('click', (e)=>{
        e.stopPropagation();
        flowerConfetti(wrapper.offsetLeft + size/2, wrapper.offsetTop + size/2 - 10, 12);
      });

      return wrapper;
    }

    function placeFlower(x, y, size){
      const f = makeFlower(size);
      f.style.left = (x - f.offsetWidth/2) + 'px';
      f.style.top  = (y - f.offsetHeight/2) + 'px';
      garden.appendChild(f);
      // suavizar entrada
      f.classList.add('bloom');
      f.style.transform = 'scale(.2) rotate(-10deg)';
      requestAnimationFrame(()=>{
        f.style.transition = 'transform .5s cubic-bezier(.2,.7,.25,1.4)';
        f.style.transform = 'scale(1) rotate(0)';
        setTimeout(()=>{ f.classList.remove('bloom'); f.style.transition=''; }, 520);
      });
      return f;
    }

    function flowerConfetti(x, y, n=18){
      for(let i=0;i<n;i++){
        const b = el('div', { class:'petal-bit', style:{ left: x+'px', top: y+'px' } });
        const dx = rand(-160, 160) + 'px';
        const t = (rand(4, 7)).toFixed(2)+'s';
        b.style.setProperty('--dx', dx);
        b.style.setProperty('--t', t);
        b.style.transform = `translate3d(${rand(-30,30)}px, ${rand(-20,20)}px, 0)`;
        garden.appendChild(b);
        b.addEventListener('animationend', ()=> b.remove());
      }
    }

    function randomInGarden(){
      const r = garden.getBoundingClientRect();
      return { x: rand(60, r.width-60), y: rand(120, r.height-80) };
    }

    // Interacci√≥n principal: clic para crear
    garden.addEventListener('click', (e)=>{
      placeFlower(e.clientX, e.clientY);
      flowerConfetti(e.clientX, e.clientY, 10);
      hideTipSoon();
    });

    function hideTipSoon(){
      clearTimeout(tipTimeout);
      tipTimeout = setTimeout(()=> tip.style.display='none', 4000);
    }

    // Botones UI
    document.getElementById('btn-ramo').addEventListener('click', ()=>{
      const base = randomInGarden();
      for(let i=0;i<5;i++){
        const x = base.x + rand(-60,60);
        const y = base.y + rand(-40,40);
        placeFlower(x, y, rand(70,110));
      }
      flowerConfetti(base.x, base.y, 24);
      hideTipSoon();
    });

    document.getElementById('btn-lluvia').addEventListener('click', ()=>{
      const r = garden.getBoundingClientRect();
      // una llovizna de flores peque√±as y p√©talos
      for(let i=0;i<14;i++){
        const x = rand(40, r.width-40);
        const f = placeFlower(x, -40, rand(40,70));
        f.style.transition = 'transform .6s ease, top 6s linear';
        // ca√≠da
        requestAnimationFrame(()=>{
          f.style.top = r.height + 'px';
        });
        setTimeout(()=> f.remove(), 6200);
      }
      for(let i=0;i<36;i++){
        const x = rand(0, r.width); flowerConfetti(x, -20, 1);
      }
      hideTipSoon();
    });

    document.getElementById('btn-limpiar').addEventListener('click', ()=>{
      [...garden.querySelectorAll('.flower, .petal-bit')].forEach(n=> n.remove());
      tip.style.display='block';
    });

    // Poblaci√≥n inicial decorativa
    function seed(){
      for(let i=0;i<9;i++){
        const p = randomInGarden();
        placeFlower(p.x, p.y, rand(70,110));
      }
    }
    seed();
  </script>
</body>
</html>
